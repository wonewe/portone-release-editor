<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PortOne 문서 허브</title>
  <style>
    :root {
      --brand: #FC6B2D;
      --brand-dark: #d75520;
      --accent: #2873FF;
      --bg-soft: #fff7f3;
      --bg-gradient: linear-gradient(180deg, #fff4eb 0%, #ffffff 60%);
      --panel: rgba(255, 255, 255, 0.88);
      --panel-border: rgba(255, 255, 255, 0.6);
      --text: #0f172a;
      --muted: #64748b;
    }
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Pretendard", "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      display: flex;
      flex-direction: column;
    }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(12px);
      background: rgba(255, 255, 255, 0.85);
      border-bottom: 1px solid rgba(15, 23, 42, 0.05);
    }
    .header-inner {
      max-width: 1040px;
      margin: 0 auto;
      padding: 18px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .brand img {
      height: 32px;
      width: auto;
      display: block;
    }
    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .brand-text strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--text);
    }
    .brand-text span {
      font-size: 12px;
      color: var(--muted);
    }
    main {
      flex: 1;
      width: 100%;
      max-width: 1040px;
      padding: 48px 24px 64px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 36px;
    }
    .hero {
      display: flex;
      flex-direction: column;
      gap: 16px;
      max-width: 720px;
    }
    .hero .badge {
      display: inline-flex;
      gap: 6px;
      align-items: center;
      font-size: 12px;
      font-weight: 600;
      color: var(--brand-dark);
      background: rgba(252, 107, 45, 0.12);
      padding: 6px 12px;
      border-radius: 999px;
      width: fit-content;
    }
    .intro-title {
      margin: 0;
      font-size: 36px;
      font-weight: 800;
      letter-spacing: -0.02em;
      line-height: 1.2;
      color: var(--text);
      opacity: 0;
      transform: translate3d(0, 12px, 0);
    }
    .intro-title.visible {
      animation: fadeSlideUp 0.9s ease-out forwards 0.15s;
    }
    .intro-sub {
      margin: 0;
      font-size: 16px;
      line-height: 1.6;
      color: var(--muted);
      max-width: 640px;
      opacity: 0;
      transform: translate3d(0, 10px, 0);
    }
    .intro-sub.visible {
      animation: fadeSlideUp 0.8s ease-out forwards 0.35s;
    }
    @keyframes fadeSlideUp {
      from {
        opacity: 0;
        transform: translate3d(0, 12px, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
    .doc-grid {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    .doc-card {
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: 20px;
      padding: 24px 24px 28px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      box-shadow: 0 14px 34px rgba(188, 108, 72, 0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .doc-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 22px 40px rgba(188, 108, 72, 0.12);
    }
    .doc-card h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
    }
    .doc-card p {
      margin: 0;
      font-size: 14px;
      line-height: 1.6;
      color: var(--muted);
    }
    .doc-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: auto;
    }
    .doc-actions button {
      flex: 1 1 180px;
      padding: 12px 18px;
      border-radius: 12px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: #ffffff;
      background: var(--brand);
      transition: transform 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
    }
    .doc-actions button.secondary {
      background: var(--accent);
    }
    .doc-actions button:hover {
      transform: translateY(-1px);
      background: var(--brand-dark);
      box-shadow: 0 10px 26px rgba(252, 107, 45, 0.15);
    }
    .doc-actions button.secondary:hover {
      background: #1c5cdf;
      box-shadow: 0 10px 26px rgba(40, 115, 255, 0.18);
    }
    .saved-section {
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: 20px;
      padding: 28px 24px;
      box-shadow: 0 12px 32px rgba(15, 23, 42, 0.06);
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .saved-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }
    .saved-section-header h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
      color: var(--text);
    }
    .saved-section-header button {
      border: none;
      background: none;
      color: var(--muted);
      font-size: 12px;
      cursor: pointer;
    }
    .saved-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .saved-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 18px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.18);
      background: #ffffff;
    }
    .saved-item-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      flex: 1;
      min-width: 0;
    }
    .saved-item-meta {
      font-size: 12px;
      color: var(--muted);
      margin-right: 12px;
      white-space: nowrap;
    }
    .saved-item-actions {
      display: inline-flex;
      gap: 8px;
    }
    .saved-item-actions button {
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease;
    }
    .saved-item-actions button.primary {
      background: var(--accent);
      color: #ffffff;
    }
    .saved-item-actions button.primary:hover {
      background: #1c5cdf;
      transform: translateY(-1px);
    }
    .saved-item-actions button.delete {
      background: #ef4444;
      color: #ffffff;
    }
    .saved-item-actions button.delete:hover {
      background: #dc2626;
      transform: translateY(-1px);
    }
    .saved-empty {
      font-size: 13px;
      color: var(--muted);
    }
    footer {
      padding: 32px 24px 48px;
      text-align: center;
      font-size: 12px;
      color: var(--muted);
    }
    @media (max-width: 720px) {
      main {
        padding: 32px 20px 48px;
      }
      .hero .badge {
        font-size: 11px;
      }
      .intro-title {
        font-size: 30px;
      }
      .doc-actions button {
        flex: 1 1 140px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="brand">
        <img src="/assets/portone-logo.png" alt="PortOne" />
        <div class="brand-text">
          <strong>포트원 고객 지원 문서 허브</strong>
          <span>릴리즈 노트 및 공지사항 작성 툴</span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" aria-label="인트로">
      <span class="badge">PORTONE DOCS WORKFLOW</span>
      <h1 class="intro-title" id="introTitle">어떤 문서를 작성할까요?</h1>
      <p class="intro-sub" id="introSub">
        제품 릴리즈 노트부터 서비스 공지 메일까지, 한 곳에서 초안을 만들고 다듬을 수 있어요.
        자주 쓰는 문서는 저장해 두었다가 바로 이어서 편집할 수도 있습니다.
      </p>
    </section>

    <section class="doc-grid" aria-label="문서 유형 선택">
      <article class="doc-card">
        <h2>제품 릴리즈 노트</h2>
        <p>
          전자결제(OPI) 혹은 재무솔루션(FS) 별 안내를 빠르게 정리하세요.
          AI 초안, 이미지 슬롯 교체, 텍스트 편집이 간편하게 구성되어 있습니다.
        </p>
        <div class="doc-actions">
          <button type="button" data-document-type="release" data-product="payments">전자결제 릴리즈노트</button>
          <button type="button" class="secondary" data-document-type="release" data-product="finance">재무솔루션 릴리즈노트</button>
        </div>
      </article>

      <article class="doc-card">
        <h2>서비스 공지 메일</h2>
        <p>
          점검·정책 변경 등 고객 안내용 메일을 세련된 템플릿으로 작성하세요.
          CTA 버튼, 주요 일정 등 꼭 필요한 요소만 담아 빠르게 발송할 수 있습니다.
        </p>
        <div class="doc-actions">
          <button type="button" data-document-type="notice">공지 메일 편집</button>
        </div>
      </article>
    </section>

    <section class="saved-section" aria-label="저장된 문서 목록">
      <div class="saved-section-header">
        <h2>저장된 문서</h2>
        <button type="button" id="manageStorageBtn">저장소 관리</button>
      </div>
      <div id="savedDocsContainer" class="saved-list"></div>
    </section>
  </main>

  <footer>
    © 2025 PortOne Korea Corp. All rights reserved.
  </footer>

  <script>
    const STORAGE_KEY = 'portoneSavedDocs';
    const introTitle = document.getElementById('introTitle');
    const introSub = document.getElementById('introSub');
    const manageStorageBtn = document.getElementById('manageStorageBtn');

    window.addEventListener('DOMContentLoaded', () => {
      requestAnimationFrame(() => {
        introTitle?.classList.add('visible');
        introSub?.classList.add('visible');
      });
    });

    document.querySelectorAll('button[data-document-type]').forEach((button) => {
      button.addEventListener('click', () => {
        const type = button.getAttribute('data-document-type') || 'release';
        const params = new URLSearchParams({ type });
        const product = button.getAttribute('data-product');
        if (product) params.set('product', product);
        window.location.href = `editor.html?${params.toString()}`;
      });
    });

    function loadSavedDocs() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed)) return [];
        return parsed;
      } catch (error) {
        console.warn('Failed to parse saved docs', error);
        return [];
      }
    }

    function saveDocsToStorage(list) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
      } catch (error) {
        console.warn('Failed to store docs', error);
      }
    }

    function formatDate(iso) {
      if (!iso) return '';
      try {
        const date = new Date(iso);
        if (Number.isNaN(date.getTime())) return '';
        return date.toLocaleString('ko-KR', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit',
        });
      } catch {
        return '';
      }
    }

    function renderSavedDocs() {
      const container = document.getElementById('savedDocsContainer');
      if (!container) return;
      const docs = loadSavedDocs().sort((a, b) => (b.updatedAt || '').localeCompare(a.updatedAt || ''));
      container.innerHTML = '';
      if (docs.length === 0) {
        const empty = document.createElement('p');
        empty.className = 'saved-empty';
        empty.textContent = '아직 저장된 문서가 없습니다. 편집기에서 저장하면 여기에서 확인할 수 있어요.';
        container.appendChild(empty);
        return;
      }

      docs.forEach((doc) => {
        const item = document.createElement('div');
        item.className = 'saved-item';

        const title = document.createElement('div');
        title.className = 'saved-item-title';
        title.textContent = doc.title || '제목 없음';

        const meta = document.createElement('div');
        meta.className = 'saved-item-meta';
        const timestamp = formatDate(doc.updatedAt);
        meta.textContent = timestamp || '';

        const actions = document.createElement('div');
        actions.className = 'saved-item-actions';

        const openBtn = document.createElement('button');
        openBtn.type = 'button';
        openBtn.className = 'primary';
        openBtn.textContent = '열기';
        openBtn.addEventListener('click', () => {
          const params = new URLSearchParams({ saved: doc.id });
          if (doc.type) params.set('type', doc.type);
          if (doc.product) params.set('product', doc.product);
          window.location.href = `editor.html?${params.toString()}`;
        });

        const deleteBtn = document.createElement('button');
        deleteBtn.type = 'button';
        deleteBtn.className = 'delete';
        deleteBtn.textContent = '삭제';
        deleteBtn.addEventListener('click', () => {
          const ok = window.confirm(`"${doc.title || '제목 없음'}" 문서를 삭제할까요?`);
          if (!ok) return;
          const next = loadSavedDocs().filter((itemDoc) => itemDoc.id !== doc.id);
          saveDocsToStorage(next);
          renderSavedDocs();
          window.dispatchEvent(new Event('portoneSavedDocsUpdated'));
        });

        actions.appendChild(openBtn);
        actions.appendChild(deleteBtn);

        item.appendChild(title);
        if (timestamp) item.appendChild(meta);
        item.appendChild(actions);
        container.appendChild(item);
      });
    }

    if (manageStorageBtn) {
      manageStorageBtn.addEventListener('click', () => {
        const docs = loadSavedDocs();
        if (docs.length === 0) {
          alert('저장된 문서가 없습니다.');
          return;
        }
        const ok = window.confirm('저장된 문서를 모두 삭제할까요?');
        if (!ok) return;
        localStorage.removeItem(STORAGE_KEY);
        renderSavedDocs();
        window.dispatchEvent(new Event('portoneSavedDocsUpdated'));
      });
    }

    renderSavedDocs();
    window.addEventListener('portoneSavedDocsUpdated', renderSavedDocs);
  </script>
</body>
</html>
